import {Node,nodePasteRule,mergeAttributes}from'@tiptap/core';import {ReactNodeViewRenderer,NodeViewWrapper}from'@tiptap/react';import {Tweet}from'react-tweet';import {jsx}from'react/jsx-runtime';var u=/(https?:\/\/)?(www\.)?x\.com\/([a-zA-Z0-9_]{1,15})(\/status\/(\d+))?(\/\S*)?/g,l=/^https?:\/\/(www\.)?x\.com\/([a-zA-Z0-9_]{1,15})(\/status\/(\d+))?(\/\S*)?$/,w=t=>t.match(l),c=({node:t})=>{let n=t?.attrs?.src?.split("/").pop();return n?jsx(NodeViewWrapper,{children:jsx("div",{"data-twitter":"",children:jsx(Tweet,{id:n})})}):null},g=Node.create({name:"twitter",addOptions(){return {addPasteHandler:!0,HTMLAttributes:{},inline:!1,origin:""}},addNodeView(){return ReactNodeViewRenderer(c,{attrs:this.options.HTMLAttributes})},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return {src:{default:null}}},parseHTML(){return [{tag:"div[data-twitter]"}]},addCommands(){return {setTweet:t=>({commands:r})=>w(t.src)?r.insertContent({type:this.name,attrs:t}):!1}},addPasteRules(){return this.options.addPasteHandler?[nodePasteRule({find:u,type:this.type,getAttributes:t=>({src:t.input})})]:[]},renderHTML({HTMLAttributes:t}){return ["div",mergeAttributes({"data-twitter":""},t)]}});export{u as a,l as b,w as c,g as d};