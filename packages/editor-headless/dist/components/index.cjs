'use strict';var react=require('@tiptap/react');require('@tiptap/core');var jotai=require('jotai'),react$1=require('react'),k=require('tunnel-rat'),cmdk=require('cmdk'),jsxRuntime=require('react/jsx-runtime'),reactSlot=require('@radix-ui/react-slot');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var k__default=/*#__PURE__*/_interopDefault(k);var E=jotai.createStore();var y=jotai.atom(""),p=jotai.atom(null);var l=react$1.createContext({});var b=react$1.forwardRef(({children:e,className:o,...n},m)=>{let[r,t]=jotai.useAtom(y);return jsxRuntime.jsx(l.Consumer,{children:i=>jsxRuntime.jsx(i.In,{children:jsxRuntime.jsxs(cmdk.Command,{ref:m,onKeyDown:c=>{c.stopPropagation();},id:"slash-command",className:o,...n,children:[jsxRuntime.jsx(cmdk.Command.Input,{value:r,onValueChange:t,style:{display:"none"}}),e]})})})}),M=cmdk.Command.List;b.displayName="EditorCommand";var W=({children:e})=>{let o=react$1.useRef(k__default.default()).current;return jsxRuntime.jsx(jotai.Provider,{store:E,children:jsxRuntime.jsx(l.Provider,{value:o,children:e})})},P=react$1.forwardRef(({className:e,children:o,initialContent:n,...m},r)=>jsxRuntime.jsx("div",{ref:r,className:e,children:jsxRuntime.jsx(react.EditorProvider,{...m,content:n,children:o})}));P.displayName="EditorContent";var R=react$1.forwardRef(({children:e,tippyOptions:o,...n},m)=>{let{editor:r}=react.useCurrentEditor(),t=react$1.useRef(null);react$1.useEffect(()=>{!t.current||!o?.placement||(t.current.setProps({placement:o.placement}),t.current.popperInstance?.update());},[o?.placement]);let i=react$1.useMemo(()=>({shouldShow:({editor:d,state:I})=>{let{selection:f}=I,{empty:N}=f;return !(!d.isEditable||d.isActive("image")||N||react.isNodeSelection(f))},tippyOptions:{onCreate:d=>{t.current=d;},moveTransition:"transform 0.15s ease-out",...o},...n}),[n,o]);return r?jsxRuntime.jsx("div",{ref:m,children:jsxRuntime.jsx(react.BubbleMenu,{editor:r,...i,children:e})}):null});R.displayName="EditorBubble";var x=react$1.forwardRef(({children:e,asChild:o,onSelect:n,...m},r)=>{let{editor:t}=react.useCurrentEditor(),i=o?reactSlot.Slot:"div";return t?jsxRuntime.jsx(i,{ref:r,...m,onClick:()=>n?.(t),children:e}):null});x.displayName="EditorBubbleItem";var h=react$1.forwardRef(({children:e,onCommand:o,...n},m)=>{let{editor:r}=react.useCurrentEditor(),t=jotai.useAtomValue(p);return !r||!t?null:jsxRuntime.jsx(cmdk.CommandItem,{ref:m,...n,onSelect:()=>o({editor:r,range:t}),children:e})});h.displayName="EditorCommandItem";var oo=cmdk.CommandEmpty;Object.defineProperty(exports,"useEditor",{enumerable:true,get:function(){return react.useCurrentEditor}});exports.EditorBubble=R;exports.EditorBubbleItem=x;exports.EditorCommand=b;exports.EditorCommandEmpty=oo;exports.EditorCommandItem=h;exports.EditorCommandList=M;exports.EditorContent=P;exports.EditorRoot=W;