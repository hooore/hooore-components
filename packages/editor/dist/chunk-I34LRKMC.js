import {b}from'./chunk-E5AYNL7Y.js';import {c}from'./chunk-XYRYXF2U.js';import {useEditor}from'@hooore/editor-headless/components';import {cn}from'@hooore/utils';import {Popover,PopoverTrigger}from'@radix-ui/react-popover';import {Trash,Check}from'lucide-react';import {useRef,useEffect}from'react';import {jsxs,jsx}from'react/jsx-runtime';function L(e){try{return new URL(e),!0}catch{return !1}}function x(e){if(L(e))return e;try{if(e.includes(".")&&!e.includes(" "))return new URL(`https://${e}`).toString()}catch{return null}}var y=({open:e,onOpenChange:o})=>{let s=useRef(null),{editor:r}=useEditor();return useEffect(()=>{s.current?.focus();}),r?jsxs(Popover,{modal:!0,open:e,onOpenChange:o,children:[jsx(PopoverTrigger,{asChild:!0,children:jsxs(b,{size:"sm",variant:"ghost",className:"editor-gap-2 editor-rounded-none editor-border-none",children:[jsx("p",{className:"editor-text-base",children:"\u2197"}),jsx("p",{className:cn("editor-underline editor-decoration-stone-400 editor-underline-offset-4",{"editor-text-blue-500":r.isActive("link")}),children:"Link"})]})}),jsx(c,{align:"start",className:"editor-w-60 editor-p-0",sideOffset:10,children:jsxs("form",{onSubmit:n=>{let u=n.currentTarget;n.preventDefault();let c=u[0],l=x(c.value);l&&(r.chain().focus().setLink({href:l}).run(),o(!1));},className:"editor-flex editor-p-1",children:[jsx("input",{ref:s,type:"text",placeholder:"Paste a link",className:"editor-bg-background editor-flex-1 editor-p-1 editor-text-sm editor-outline-none",defaultValue:r.getAttributes("link").href||""}),r.getAttributes("link").href?jsx(b,{size:"icon",variant:"outline",type:"button",className:"editor-flex editor-h-8 editor-items-center editor-rounded-sm editor-p-1 editor-text-red-600 editor-transition-all hover:editor-bg-red-100 dark:hover:editor-bg-red-800",onClick:()=>{r.chain().focus().unsetLink().run();let n=s.current;n&&(n.value=""),o(!1);},children:jsx(Trash,{className:"editor-h-4 editor-w-4"})}):jsx(b,{size:"icon",className:"editor-h-8",children:jsx(Check,{className:"editor-h-4 editor-w-4"})})]})})]}):null};
export{L as a,x as b,y as c};