'use client'
import{b as i}from"./chunk-E5AYNL7Y.js";import{c as u}from"./chunk-XYRYXF2U.js";import{useEditor as p}from"@hooore/editor-headless/components";import{cn as f}from"@hooore/utils";import{Popover as m,PopoverTrigger as g}from"@radix-ui/react-popover";import{Check as h,Trash as v}from"lucide-react";import{useEffect as k,useRef as b}from"react";import{jsx as t,jsxs as l}from"react/jsx-runtime";function L(e){try{return new URL(e),!0}catch{return!1}}function x(e){if(L(e))return e;try{if(e.includes(".")&&!e.includes(" "))return new URL(`https://${e}`).toString()}catch{return null}}var y=({open:e,onOpenChange:o})=>{let s=b(null),{editor:r}=p();return k(()=>{s.current?.focus()}),r?l(m,{modal:!0,open:e,onOpenChange:o,children:[t(g,{asChild:!0,children:l(i,{size:"sm",variant:"ghost",className:"editor-gap-2 editor-rounded-none editor-border-none",children:[t("p",{className:"editor-text-base",children:"\u2197"}),t("p",{className:f("editor-underline editor-decoration-stone-400 editor-underline-offset-4",{"editor-text-blue-500":r.isActive("link")}),children:"Link"})]})}),t(u,{align:"start",className:"editor-w-60 editor-p-0",sideOffset:10,children:l("form",{onSubmit:n=>{let d=n.currentTarget;n.preventDefault();let c=d[0],a=x(c.value);a&&(r.chain().focus().setLink({href:a}).run(),o(!1))},className:"editor-flex editor-p-1",children:[t("input",{ref:s,type:"text",placeholder:"Paste a link",className:"editor-bg-background editor-flex-1 editor-p-1 editor-text-sm editor-outline-none",defaultValue:r.getAttributes("link").href||""}),r.getAttributes("link").href?t(i,{size:"icon",variant:"outline",type:"button",className:"editor-flex editor-h-8 editor-items-center editor-rounded-sm editor-p-1 editor-text-red-600 editor-transition-all hover:editor-bg-red-100 dark:hover:editor-bg-red-800",onClick:()=>{r.chain().focus().unsetLink().run();let n=s.current;n&&(n.value=""),o(!1)},children:t(v,{className:"editor-h-4 editor-w-4"})}):t(i,{size:"icon",className:"editor-h-8",children:t(h,{className:"editor-h-4 editor-w-4"})})]})})]}):null};export{L as a,x as b,y as c};
