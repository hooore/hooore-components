'use client'
"use strict";var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var c=Object.prototype.hasOwnProperty;var d=(e,a)=>{for(var o in a)s(e,o,{get:a[o],enumerable:!0})},g=(e,a,o,t)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of u(a))!c.call(e,r)&&r!==o&&s(e,r,{get:()=>a[r],enumerable:!(t=p(a,r))||t.enumerable});return e};var y=e=>g(s({},"__esModule",{value:!0}),e);var h={};d(h,{uploadFn:()=>w});module.exports=y(h);var m=require("@hooore/editor-headless/plugins"),n=require("sonner"),f=e=>{let a=fetch("/api/upload",{method:"POST",headers:{"content-type":e?.type||"application/octet-stream","x-vercel-filename":e?.name||"image.png"},body:e});return new Promise((o,t)=>{n.toast.promise(a.then(async r=>{if(r.status===200){let{url:i}=await r.json(),l=new Image;l.src=i,l.onload=()=>{o(i)}}else throw r.status===401?(o(e),new Error("`BLOB_READ_WRITE_TOKEN` environment variable not found, reading image locally instead.")):new Error("Error uploading image. Please try again.")}),{loading:"Uploading image...",success:"Image uploaded successfully.",error:r=>(t(r),r.message)})})},w=(0,m.createImageUpload)({onUpload:f,validateFn:e=>e.type.includes("image/")?e.size/1024/1024>20?(n.toast.error("File size too big (max 20MB)."),!1):!0:(n.toast.error("File type not supported."),!1)});0&&(module.exports={uploadFn});
