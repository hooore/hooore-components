'use client'
"use strict";"use client";var z=Object.create;var s=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var M=(e,t)=>{for(var o in t)s(e,o,{get:t[o],enumerable:!0})},h=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of S(t))!H.call(e,r)&&r!==o&&s(e,r,{get:()=>t[r],enumerable:!(n=E(t,r))||n.enumerable});return e};var f=(e,t,o)=>(o=e!=null?z(V(e)):{},h(t||!e||!e.__esModule?s(o,"default",{value:e,enumerable:!0}):o,e)),A=e=>h(s({},"__esModule",{value:!0}),e);var I={};M(I,{LinkSelector:()=>F,getUrlFromString:()=>B,isValidUrl:()=>T});module.exports=A(I);var L=require("@hooore/editor-headless/components"),w=require("@hooore/utils"),l=require("@radix-ui/react-popover"),u=require("lucide-react"),p=require("react");var P=require("@radix-ui/react-slot"),x=require("class-variance-authority"),y=f(require("react"),1),k=require("@hooore/utils"),R=require("react/jsx-runtime"),U=(0,x.cva)("editor-inline-flex editor-items-center editor-justify-center editor-whitespace-nowrap editor-rounded-md editor-text-sm editor-font-medium editor-ring-offset-background editor-transition-colors focus-visible:editor-outline-none focus-visible:editor-ring-2 focus-visible:editor-ring-ring focus-visible:editor-ring-offset-2 disabled:editor-pointer-events-none disabled:editor-opacity-50",{variants:{variant:{default:"editor-bg-primary editor-text-primary-foreground hover:editor-bg-primary/90",destructive:"editor-bg-destructive editor-text-destructive-foreground hover:editor-bg-destructive/90",outline:"editor-border editor-border-input editor-bg-background hover:editor-bg-accent hover:editor-text-accent-foreground",secondary:"editor-bg-secondary editor-text-secondary-foreground hover:editor-bg-secondary/80",ghost:"hover:editor-bg-accent hover:editor-text-accent-foreground",link:"editor-text-primary editor-underline-offset-4 hover:editor-underline"},size:{default:"editor-h-10 editor-px-4 editor-py-2",sm:"editor-h-9 editor-rounded-md editor-px-3",lg:"editor-h-11 editor-rounded-md editor-px-8",icon:"editor-h-10 editor-w-10"}},defaultVariants:{variant:"default",size:"default"}}),a=y.forwardRef(({className:e,variant:t,size:o,asChild:n=!1,...r},c)=>(0,R.jsx)(n?P.Slot:"button",{className:(0,k.cn)(U({variant:t,size:o,className:e})),ref:c,...r}));a.displayName="Button";var d=f(require("@radix-ui/react-popover"),1),N=f(require("react"),1),C=require("@hooore/utils"),m=require("react/jsx-runtime");var v=N.forwardRef(({className:e,align:t="center",sideOffset:o=4,...n},r)=>(0,m.jsx)(d.Portal,{children:(0,m.jsx)(d.Content,{ref:r,align:t,sideOffset:o,className:(0,C.cn)("editor-bg-popover editor-text-popover-foreground data-[state=open]:editor-animate-in data-[state=closed]:editor-animate-out data-[state=closed]:editor-fade-out-0 data-[state=open]:editor-fade-in-0 data-[state=closed]:editor-zoom-out-95 data-[state=open]:editor-zoom-in-95 data-[side=bottom]:editor-slide-in-from-top-2 data-[side=left]:editor-slide-in-from-right-2 data-[side=right]:editor-slide-in-from-left-2 data-[side=top]:editor-slide-in-from-bottom-2 editor-z-50 editor-w-72 editor-rounded-md editor-border editor-p-4 editor-shadow-md editor-outline-none",e),...n})}));v.displayName=d.Content.displayName;var i=require("react/jsx-runtime");function T(e){try{return new URL(e),!0}catch{return!1}}function B(e){if(T(e))return e;try{if(e.includes(".")&&!e.includes(" "))return new URL(`https://${e}`).toString()}catch{return null}}var F=({open:e,onOpenChange:t})=>{let o=(0,p.useRef)(null),{editor:n}=(0,L.useEditor)();return(0,p.useEffect)(()=>{o.current?.focus()}),n?(0,i.jsxs)(l.Popover,{modal:!0,open:e,onOpenChange:t,children:[(0,i.jsx)(l.PopoverTrigger,{asChild:!0,children:(0,i.jsxs)(a,{size:"sm",variant:"ghost",className:"editor-gap-2 editor-rounded-none editor-border-none",children:[(0,i.jsx)("p",{className:"editor-text-base",children:"\u2197"}),(0,i.jsx)("p",{className:(0,w.cn)("editor-underline editor-decoration-stone-400 editor-underline-offset-4",{"editor-text-blue-500":n.isActive("link")}),children:"Link"})]})}),(0,i.jsx)(v,{align:"start",className:"editor-w-60 editor-p-0",sideOffset:10,children:(0,i.jsxs)("form",{onSubmit:r=>{let c=r.currentTarget;r.preventDefault();let g=c[0],b=B(g.value);b&&(n.chain().focus().setLink({href:b}).run(),t(!1))},className:"editor-flex editor-p-1",children:[(0,i.jsx)("input",{ref:o,type:"text",placeholder:"Paste a link",className:"editor-bg-background editor-flex-1 editor-p-1 editor-text-sm editor-outline-none",defaultValue:n.getAttributes("link").href||""}),n.getAttributes("link").href?(0,i.jsx)(a,{size:"icon",variant:"outline",type:"button",className:"editor-flex editor-h-8 editor-items-center editor-rounded-sm editor-p-1 editor-text-red-600 editor-transition-all hover:editor-bg-red-100 dark:hover:editor-bg-red-800",onClick:()=>{n.chain().focus().unsetLink().run();let r=o.current;r&&(r.value=""),t(!1)},children:(0,i.jsx)(u.Trash,{className:"editor-h-4 editor-w-4"})}):(0,i.jsx)(a,{size:"icon",className:"editor-h-8",children:(0,i.jsx)(u.Check,{className:"editor-h-4 editor-w-4"})})]})})]}):null};0&&(module.exports={LinkSelector,getUrlFromString,isValidUrl});
